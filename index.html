<!DOCTYPE html>
<html>
<head>
    <title>COVID-19, Visualized</title>

    <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- CSS file -->
    <link rel="stylesheet" type="text/css" href="css/style.css" media="all">

</head>
<body>
    <div class="page">
        <!-- pure grid group -->
        <div class="pure-g" id="banner">
        <div class="pure-u-1-1">
            <h1>COVID-19, Visualized</h1>
            <p>Coronavirus disease (COVID-19) is an infectious disease caused by the SARS-CoV-2 virus.
               Most people who fall sick with COVID-19 will experience mild to moderate symptoms and recover without 
               special treatment. However, some will become seriously ill and require medical attention.</p>
        </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-2-3">
            <div class="audio_frame">
            <div id="audio">
                <img src="media/play_button.png", id="button">
                <p><span style="color: #f3d24f">Click the button</span> to listen to the audio narration</p>
            </div>
            </div>
            <div id="choro_frame">
            <div class="description-left">
                <h2>COVID-19 Cumulative Cases and Deaths Around the World</h2>
                <p>The coronavirus has already spread to almost every country in the world. It has led to a substantial loss of human life worldwide, and presents an unprecedented challenge to public health, food supply and the world of work.</p>
                <p>Using the visualization below we can see which countries are impacted the most by the virus. The map gives an overview on the matter and can be seen based on the number of cumulative cases as well as the number of cumulative deaths in each country.  Each country is coloured based on the different classes of severity.</p>
            </div>
            <div id="choropleth_map"></div>
                <p>This page demonstrates how you can use pure.css grid for your layout.</p>
            <div id="scatter_plot"></div>
            </div>
            <div id="line_frame">
            <div id="line_chart"></div>
            </div>
            <div id="sankey_frame">
                <div class="description-left">
                    <h2>Vaccination Distribution by Vaccine Type</h2>
                    <p>Similar to the previous section, but the colum partition is swapped. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Massa sapien faucibus et molestie ac feugiat sed. Egestas purus viverra accumsan in nisl.</p>
                </div>
                <div id="sankey_multiple"></div>
            </div>
            <div id="radial_frame">
                <div class="description-left">
                    <h2>Total Vaccinations by Manufacturer</h2>
                    <p>Similar to the previous section, but the colum partition is swapped. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Massa sapien faucibus et molestie ac feugiat sed. Egestas purus viverra accumsan in nisl.</p>
                </div>
                <div id="radial"></div>
            </div>
            </div>
            <div class="pure-u-1-3">
            <div id="bar_frame">
                <div id="bar_chart"></div>
            </div>
            </div>
        </div>
        <!-- end pure grid group -->

        <!-- pure grid group -->
        <div class="pure-g">
            <div class="pure-u-1-1" id="end_credit">
            <p>This visualisation is created by <a href="https://github.com/nathanwsoe" target="_blank">Nathan William Soegiarto</a></href>.</p>
            <p>Data sources: <a href="https://github.com/owid/covid-19-data/tree/master/public/data/" target="_blank">Our World in Data</a></href>, and <a href="https://covid19.who.int/info/" target="_blank">World Health Organization</a></href>.</p>
            </div>
        </div>
        <!-- end pure grid group -->
    </div> <!-- end page -->

    <audio id="narration">
        <source src="media/run_it.mp3" type="audio/mp3">
    </audio>

    <script>
        var narration = document.getElementById("narration");
        var button = document.getElementById("button");

        button.onclick = function(){
            if (narration.paused){
                narration.play();
                button.src = "media/pause_button.png";
            } else{
                narration.pause();
                button.src = "media/play_button.png";
            }
        }
    </script>
   
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    
    <script type="text/javascript">
      google.charts.load("current", {packages:["sankey"]});
      google.charts.setOnLoadCallback(drawChart);
       function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Country');
        data.addColumn('string', 'Vaccine');
        data.addColumn('number', 'Percentage');
        data.addColumn('number', 'Total Vaccinations');
        data.addRows([
        ["Austria","Johnson&Johnson",0.027104614,278165],
        ["Austria","Moderna",0.099042898,1016442],
        ["Austria","Oxford/AstraZeneca",0.155472703,1595561],
        ["Austria","Pfizer/BioNTech",0.718379786,7372476],
        ["Belgium","Johnson&Johnson",0.023152573,353159],
        ["Belgium","Moderna",0.086210341,1315014],
        ["Belgium","Oxford/AstraZeneca",0.185417063,2828269],
        ["Belgium","Pfizer/BioNTech",0.705220023,10757111],
        ["Bulgaria","Johnson&Johnson",0.068648109,161596],
        ["Bulgaria","Moderna",0.121385265,285738],
        ["Bulgaria","Oxford/AstraZeneca",0.202986352,477825],
        ["Bulgaria","Pfizer/BioNTech",0.606980275,1428817],
        ["Chile","CanSino",0.019985755,555766],
        ["Chile","Oxford/AstraZeneca",0.017836957,496012],
        ["Chile","Pfizer/BioNTech",0.260452654,7242695],
        ["Chile","Sinovac",0.701724634,19513633],
        ["Croatia","Johnson&Johnson",0.022801422,74878],
        ["Croatia","Moderna",0.096874222,318127],
        ["Croatia","Oxford/AstraZeneca",0.166965192,548300],
        ["Croatia","Pfizer/BioNTech",0.713359164,2342613],
        ["Cyprus","Johnson&Johnson",0.018391077,20003],
        ["Cyprus","Moderna",0.077074639,83830],
        ["Cyprus","Oxford/AstraZeneca",0.232182868,252533],
        ["Cyprus","Pfizer/BioNTech",0.672351415,731281],
        ["Czechia","Johnson&Johnson",0.018449296,214581],
        ["Czechia","Moderna",0.077927409,906362],
        ["Czechia","Oxford/AstraZeneca",0.075621988,879548],
        ["Czechia","Pfizer/BioNTech",0.828001307,9630359],
        ["Denmark","Johnson&Johnson",0.005876334,48227],
        ["Denmark","Moderna",0.139235142,1142701],
        ["Denmark","Oxford/AstraZeneca",0.018862464,154804],
        ["Denmark","Pfizer/BioNTech",0.836026059,6861255],
        ["Estonia","Johnson&Johnson",0.035687593,45552],
        ["Estonia","Moderna",0.099509562,127015],
        ["Estonia","Oxford/AstraZeneca",0.185257872,236465],
        ["Estonia","Pfizer/BioNTech",0.679544974,867378],
        ["Finland","Moderna",0.105908574,723324],
        ["Finland","Oxford/AstraZeneca",0.080955362,552901],
        ["Finland","Pfizer/BioNTech",0.813136064,5553477],
        ["France","Johnson&Johnson",0.011304482,1027066],
        ["France","Moderna",0.105272307,9564490],
        ["France","Oxford/AstraZeneca",0.085663505,7782937],
        ["France","Pfizer/BioNTech",0.797759706,72480265],
        ["Germany","Johnson&Johnson",0.028570502,2970809],
        ["Germany","Moderna",0.091403537,9504294],
        ["Germany","Oxford/AstraZeneca",0.121855986,12670791],
        ["Germany","Pfizer/BioNTech",0.758169975,78835793],
        ["Hong Kong","Pfizer/BioNTech",0.634616299,5150240],
        ["Hong Kong","Sinovac",0.365383701,2965278],
        ["Hungary","Johnson&Johnson",0.013468557,143119],
        ["Hungary","Moderna",0.06423884,682612],
        ["Hungary","Oxford/AstraZeneca",0.117072804,1244034],
        ["Hungary","Pfizer/BioNTech",0.438691053,4661600],
        ["Hungary","Sinopharm/Beijing",0.196958505,2092912],
        ["Hungary","Sputnik V",0.169570241,1801880],
        ["Iceland","Johnson&Johnson",0.100388862,53749],
        ["Iceland","Moderna",0.116288886,62262],
        ["Iceland","Oxford/AstraZeneca",0.215560843,115413],
        ["Iceland","Pfizer/BioNTech",0.567761408,303984],
        ["Ireland","Johnson&Johnson",0.035447338,233915],
        ["Ireland","Moderna",0.08584025,566455],
        ["Ireland","Oxford/AstraZeneca",0.180156704,1188844],
        ["Ireland","Pfizer/BioNTech",0.698555708,4609730],
        ["Italy","Johnson&Johnson",0.018016784,1454962],
        ["Italy","Moderna",0.122804613,9917200],
        ["Italy","Oxford/AstraZeneca",0.150213277,12130612],
        ["Italy","Pfizer/BioNTech",0.708965326,57253150],
        ["Japan","Moderna",0.061595507,5687427],
        ["Japan","Pfizer/BioNTech",0.938404493,86647668],
        ["Latvia","Johnson&Johnson",0.072296092,112278],
        ["Latvia","Moderna",0.152740771,237211],
        ["Latvia","Oxford/AstraZeneca",0.186639666,289857],
        ["Latvia","Pfizer/BioNTech",0.588323471,913684],
        ["Liechtenstein","Moderna",0.700498558,28663],
        ["Liechtenstein","Pfizer/BioNTech",0.299501442,12255],
        ["Lithuania","Johnson&Johnson",0.111712883,365030],
        ["Lithuania","Moderna",0.077842178,254355],
        ["Lithuania","Oxford/AstraZeneca",0.162929795,532385],
        ["Lithuania","Pfizer/BioNTech",0.647515144,2115803],
        ["Luxembourg","Johnson&Johnson",0.050791419,35978],
        ["Luxembourg","Moderna",0.098536313,69798],
        ["Luxembourg","Oxford/AstraZeneca",0.148592217,105255],
        ["Luxembourg","Pfizer/BioNTech",0.702080051,497317],
        ["Malta","Johnson&Johnson",0.040159507,30394],
        ["Malta","Moderna",0.056718003,42926],
        ["Malta","Oxford/AstraZeneca",0.297545558,225192],
        ["Malta","Pfizer/BioNTech",0.605576931,458320],
        ["Netherlands","Johnson&Johnson",0.035871971,792845],
        ["Netherlands","Moderna",0.088634348,1959003],
        ["Netherlands","Oxford/AstraZeneca",0.127784247,2824297],
        ["Netherlands","Pfizer/BioNTech",0.747709435,16525930],
        ["Poland","Johnson&Johnson",0.052082145,1828169],
        ["Poland","Moderna",0.086195844,3025616],
        ["Poland","Oxford/AstraZeneca",0.150286855,5275316],
        ["Poland","Pfizer/BioNTech",0.711435156,24972545],
        ["Portugal","Johnson&Johnson",0.076230784,1112273],
        ["Portugal","Moderna",0.121932121,1779095],
        ["Portugal","Oxford/AstraZeneca",0.150097349,2190050],
        ["Portugal","Pfizer/BioNTech",0.651739746,9509446],
        ["Romania","Johnson&Johnson",0.065929514,649845],
        ["Romania","Moderna",0.074194279,731308],
        ["Romania","Oxford/AstraZeneca",0.085941662,847098],
        ["Romania","Pfizer/BioNTech",0.773934546,7628412],
        ["Slovakia","Johnson&Johnson",0.016369784,72800],
        ["Slovakia","Moderna",0.106304661,472760],
        ["Slovakia","Oxford/AstraZeneca",0.188213171,837025],
        ["Slovakia","Pfizer/BioNTech",0.680518922,3026416],
        ["Slovakia","Sputnik V",0.008593462,38217],
        ["Slovenia","Johnson&Johnson",0.050241119,89212],
        ["Slovenia","Moderna",0.102280426,181617],
        ["Slovenia","Oxford/AstraZeneca",0.178566823,317077],
        ["Slovenia","Pfizer/BioNTech",0.668911632,1187771],
        ["South Korea","Johnson&Johnson",0.025732905,1333806],
        ["South Korea","Moderna",0.07004518,3630631],
        ["South Korea","Oxford/AstraZeneca",0.412910629,21402274],
        ["South Korea","Pfizer/BioNTech",0.491311287,25465992],
        ["Spain","Johnson&Johnson",0.030242094,1946713],
        ["Spain","Moderna",0.124550426,8017432],
        ["Spain","Oxford/AstraZeneca",0.15152016,9753500],
        ["Spain","Pfizer/BioNTech",0.693687319,44653327],
        ["Sweden","Moderna",0.121180171,1552068],
        ["Sweden","Oxford/AstraZeneca",0.103950152,1331387],
        ["Sweden","Pfizer/BioNTech",0.774869677,9924482],
        ["Switzerland","Moderna",0.663179699,6522310],
        ["Switzerland","Pfizer/BioNTech",0.336820301,3312596],
        ["United States","Johnson&Johnson",0.038625763,14643267],
        ["United States","Moderna",0.390512095,148045563],
        ["United States","Pfizer/BioNTech",0.570862142,216417387],
        ["Uruguay","Oxford/AstraZeneca",0.016513224,86597],
        ["Uruguay","Pfizer/BioNTech",0.364652276,1912273],
        ["Uruguay","Sinovac",0.6188345,3245230]
        ]);
    
        // Set chart options
        var options = {
          width: 760,
          height: 1000,
          tooltip: { textStyle: { fontName: 'sans-serif', fontSize: 11 }},
          sankey: {
            link: { color: { fill: '#871b47'}},
            node: { 
                colorMode: 'source',
                colors: [
                    '#d799ae',
                    '#a61d4c',
                    '#ff4182',
                    '#c90d4d'
                ],
                label: { 
                    color: 'white',
                    bold: true,
                } 
              }
            }
        };
    
        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.Sankey(document.getElementById('sankey_multiple'));
        chart.draw(data, options);
       }
    </script>

<script type="text/javascript">
    var vis1 = "js/choropleth_map.vl.json";
    var vis2 = "js/bar_chart.vl.json";
    var vis3 = "js/radial.vl.json";
    var vis4 = "js/line_chart.vl.json"
    var vis5 = "js/scatter_plot.vl.json"

    vegaEmbed('#choropleth_map', vis1, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#bar_chart', vis2, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#radial', vis3, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#line_chart', vis4, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#scatter_plot', vis5, {"actions": false}).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
</script>
</body>
</html>
