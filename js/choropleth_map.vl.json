{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 700,
    "height": 500,
    "params": [
      {
        "name": "Projection: ",
        "value": "equalEarth",
        "bind": {
          "input": "select",
          "options": [
            "albers",
            "albersUsa",
            "azimuthalEqualArea",
            "azimuthalEquidistant",
            "conicConformal",
            "conicEqualArea",
            "conicEquidistant",
            "equalEarth",
            "equirectangular",
            "gnomonic",
            "mercator",
            "naturalEarth1",
            "orthographic",
            "stereographic",
            "transverseMercator"
          ]
        }
      },
      {
        "name": "highlight",
        "select": {"type": "point", "on": "mouseover"}
      },
      {"name": "select", "select": "point"}
    ],
    "data": {
      "url": "https://raw.githubusercontent.com/nathanwsoe/Assignment-2/main/js/ne_110m_admin_0_countries.topojson",
      "format": {
            "type": "topojson",
            "feature": "ne_110m_admin_0_countries"
          }
    },
    "transform": [{
        "lookup": "properties.NAME",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/nathanwsoe/Assignment-2/main/data/WHO-COVID-19-global-table-data.csv"
          },
          "key": "Name",
          "fields": [
            "Cases - cumulative total per 100000 population", "Deaths - cumulative total per 100000 population",
            "WHO Region", "Cases - cumulative total", "Cases - newly reported in last 7 days", "Deaths - cumulative total", "Deaths - newly reported in last 7 days"
            ]
        }
      }
    ],
    "projection": {"type": {"expr": "Projection: "}},
    "mark": 
    {
      "type": "geoshape",
      "stroke": "black",
      "cursor": "pointer"
    },
    "encoding": {
      "color": {
        "field": "Cases - cumulative total per 100000 population",
        "type": "quantitative",
        "scale": { 
          "type": "threshold", 
          "domain": [1840, 5000, 8600, 13300]
          },
        "title": "Total Cases (per 100,000)"
      },
      "tooltip": [
        {"field": "properties.NAME", "type": "nominal", "title": "Country"},
        {"field": "WHO Region", "type": "nominal", "title": "Region"},
        {"field": "Cases - cumulative total", "type": "quantitative", "title": "Total Cases", "format": ","},
        {"field": "Cases - cumulative total per 100000 population", "type": "quantitative", "title": "Total Cases (per 100,000 population)", "format": ","},
        {"field": "Cases - newly reported in last 7 days", "type": "quantitative", "title": "Cases in the last 7 days", "format": ","},
        {"field": "Deaths - cumulative total", "type": "quantitative", "title": "Total Deaths", "format": ","},
        {"field": "Deaths - cumulative total per 100000 population", "type": "quantitative", "title": "Total Deaths (per 100,000 population)", "format": ","},
        {"field": "Deaths - newly reported in last 7 days", "type": "quantitative", "title": "Deaths in the last 7 days", "format": ","}
      ],
      "strokeWidth": {
        "condition": [
          {
            "param": "select",
            "empty": false,
            "value": 2
          },
          {
            "param": "highlight",
            "empty": false,
            "value": 2
          }
        ],
        "value": 0.7
      },
      "strokeOpacity": {
      "condition": [
          {
            "param": "select",
            "empty": false,
            "value": 1
          },
          {
            "param": "highlight",
            "empty": false,
            "value": 1
          }
        ],
        "value": 0.7
      },
      "fillOpacity"
      : {
      "condition": [
          {
            "param": "select",
            "value": 1
          },
          {
            "param": "highlight",
            "value": 1
          }
        ],
        "value": 0.1
      }
    },
    "config": {
        "style": {
          "cell": {
            "stroke": null
          }
        },
        "background": "#ddeefa",
        "legend": {"orient": "top-left", "offset": -18}
      }
  }
